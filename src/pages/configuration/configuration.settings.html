<ion-content *ngIf="viewIsReady">

  <h1 class="tab-title">
    Impostazioni applicazione
  </h1>

  <!-- Unlock buttons-->
  <div class="buttons unlock-buttons" *ngIf="isFormDisabled()" text-center align-items-center>
    <button ion-button icon-left (click)="onUnlockConfigForm()" color="danger">
      <ion-icon name="unlock"></ion-icon>
      <ion-label>Sblocca</ion-label>
    </button>
  </div>

  <!-- Lock buttons-->
  <div class="buttons lock-buttons" *ngIf="!isFormDisabled()" text-center align-items-center>
    <button ion-button icon-left (click)="onLockConfigForm()">
      <ion-icon name="lock"></ion-icon>
      <ion-label>Blocca</ion-label>
    </button>

    <button ion-button icon-left (click)="cleanCache()" color="yellow-light">
      <ion-icon name="warning"></ion-icon>
      <ion-label>Ricarica dati dal server</ion-label>
    </button>
  </div>

  <ion-list>

    <ion-list-header>Applicazione</ion-list-header>
    <ion-item>
      <ion-label stacked>Url applicazione</ion-label>
      <ion-input [(ngModel)]="cfg.crm_url" [disabled]="isFormDisabled()"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label stacked>Versione Rest API</ion-label>
      <ion-input [(ngModel)]="cfg.api_version" [disabled]="isFormDisabled()"></ion-input>
    </ion-item>

    <ion-list-header>Utente</ion-list-header>
    <ion-item>
      <ion-label stacked>Nome utente</ion-label>
      <ion-input [(ngModel)]="cfg.crm_username" [disabled]="isFormDisabled()"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label stacked>Password</ion-label>
      <ion-input type="password" [(ngModel)]="cfg.crm_password" [disabled]="isFormDisabled()"></ion-input>
    </ion-item>

    <ion-list-header>Altro</ion-list-header>
    <ion-item>
      <ion-label stacked>Livello di logging</ion-label>
      <ion-select [(ngModel)]="cfg.log_level" [disabled]="isFormDisabled()">
        <ion-option value="NONE">Nessuno</ion-option>
        <ion-option value="INFO">Info</ion-option>
        <ion-option value="WARN">Avviso</ion-option>
        <ion-option value="ERROR">Errore</ion-option>
      </ion-select>
    </ion-item>

  </ion-list>

  <div class="buttons save-buttons" *ngIf="!isFormDisabled()" text-center align-items-center>
    <hr />
    <button ion-button icon-left (click)="saveAndResetApplication()" color="dark">
      <ion-icon name="thumbs-up"></ion-icon>
      <ion-label>Salva</ion-label>
    </button>
  </div>

</ion-content>

<ion-content *ngIf="!viewIsReady">
  <ion-label class="loading">caricamento in corso...</ion-label>
</ion-content>
